{{ partial "header.html" . }}

<div itemscope itemtype="http://schema.org/Blog">

  {{ if not .IsHome }}
  <header class="list-header">
    {{ if eq .Data.Singular "tag" }}<span>{{ i18n "tagged-in" }}</span>
    <h1 class="list-title">«{{ .Data.Term }}»</h1>
    {{ else }}
    <h1 class="list-title">{{ i18n "posts" }}</h1>
    {{ end }}
  </header>
  {{ end }}

  {{ $scope := .Site }}

  {{ $paginator := .Paginate (where $scope.RegularPages ".Params.type" "!=" "page") }}

  {{ range $index, $page := $paginator.Pages }}

  {{ $class := "post-entry" }}
  {{ if (and $.IsHome (eq $paginator.PageNumber 1) (eq $index 0)) }}
  {{ $class = "first-entry" }}
  {{ else if .Data.Term }}
  {{ $class = "post-entry tag-entry" }}
  {{ end }}
  <article class="{{ $class }}" itemprop="blogPosts" itemscope itemtype="http://schema.org/BlogPosting">
    <header class="entry-header">
      <h2 itemprop="name">{{ .Title }}</h2>
      <div class="post-meta">
        <i class="fas fa-calendar-check"></i> <time datetime="{{ .Date.Format "2006-01-02" }}" itemprop="datePublished"> {{ .Date.Format "2006.01.02" }}</time>
        &middot; <i class="fas fa-clock"></i> {{ .ReadingTime }} {{ i18n "minute-short" }}
        &middot; <i class="fas fa-tags" aria-hidden="true"></i>
        <ul class="meta-post-tags">
          {{ range .Params.tags }}
          <li><a href="{{$.Site.BaseURL}}tags/{{ . | urlize }}/">{{ . }}</a></li>
          {{ end }}
        </ul>
      </div>
    </header>
    <section class="entry-content">
     <p itemprop="description">
      {{ if .Description }}
        {{ .Description }}
      {{ else }}
        {{ .Summary | plainify | htmlUnescape }}
      {{ end }}
     </p>
    </section>
    <footer class="entry-footer">
      {{ if .Truncated }}
        <a href="{{ .RelPermalink }}" class="more-link">{{ i18n "read-more" }} &rarr;</a>
      {{ end }}
    </footer>
    <a class="entry-link" href="{{ .Permalink }}" itemprop="url"></a>
  </article>
  {{ end }}

  {{ if gt $paginator.TotalPages 1 }}
  <footer class="page-footer">
    <nav class="pagination">
      {{ if $paginator.HasPrev }}
      <a class="prev" href="{{ $paginator.Prev.URL }}">← {{ i18n "prev_page" }}</a>
      {{ end }}
      {{ if $paginator.HasNext }}
      <a class="next" href="{{ $paginator.Next.URL }}">{{ i18n "next_page" }} →</a>
      {{ end }}
    </nav>
  </footer>
  {{ end }}

</div>

{{ partial "footer.html" . }}
