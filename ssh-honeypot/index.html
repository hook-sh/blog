<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content=" Honeypot («Ловушка») (англ. горшочек с мёдом) — ресурс, представляющий собой приманку для злоумышленников. (wikipedia.org)
 Одно из первых средств, которое применяется для аудита целевых систем - это сканирование портов с целью выявления, какие же службы (сервисы) там крутятся. Можете даже сейчас натравить nmap на свой сервер и посмотреть, что же он нам о нем расскажет. Самый простой пример результата его работы:
"><title>SSH Honeypot — просто и со вкусом</title>
<link rel=canonical href=https://blog.hook.sh/ssh-honeypot/>
<link rel=stylesheet href=https://blog.hook.sh/scss/style.min.34b629f31c5d473ce517c990918273ec1d17e1834d7e3e85bbb174f4ba5967e4.css>
<meta property="og:title" content="SSH Honeypot — просто и со вкусом">
<meta property="og:description" content=" Honeypot («Ловушка») (англ. горшочек с мёдом) — ресурс, представляющий собой приманку для злоумышленников. (wikipedia.org)
 Одно из первых средств, которое применяется для аудита целевых систем - это сканирование портов с целью выявления, какие же службы (сервисы) там крутятся. Можете даже сейчас натравить nmap на свой сервер и посмотреть, что же он нам о нем расскажет. Самый простой пример результата его работы:
">
<meta property="og:url" content="https://blog.hook.sh/ssh-honeypot/">
<meta property="og:site_name" content="blog [dot] hook">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="ban"><meta property="article:tag" content="bash"><meta property="article:tag" content="centos"><meta property="article:tag" content="fail2ban"><meta property="article:tag" content="iptables"><meta property="article:tag" content="linux"><meta property="article:tag" content="security"><meta property="article:tag" content="shell"><meta property="article:tag" content="ssh"><meta property="article:published_time" content="2015-07-13T11:13:57+00:00"><meta property="article:modified_time" content="2015-07-13T11:13:57+00:00"><meta property="og:image" content="https://blog.hook.sh/ssh-honeypot/cover.jpg">
<meta name=twitter:title content="SSH Honeypot — просто и со вкусом">
<meta name=twitter:description content=" Honeypot («Ловушка») (англ. горшочек с мёдом) — ресурс, представляющий собой приманку для злоумышленников. (wikipedia.org)
 Одно из первых средств, которое применяется для аудита целевых систем - это сканирование портов с целью выявления, какие же службы (сервисы) там крутятся. Можете даже сейчас натравить nmap на свой сервер и посмотреть, что же он нам о нем расскажет. Самый простой пример результата его работы:
"><meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blog.hook.sh/ssh-honeypot/cover.jpg">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1B4Z5Q844N"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-1B4Z5Q844N',{anonymize_ip:!0})}</script>
<link rel=apple-touch-icon sizes=180x180 href="https://blog.hook.sh/apple-touch-icon.png?v=1644715216">
<link rel=icon type=image/png sizes=32x32 href="https://blog.hook.sh/favicon-32x32.png?v=1644715216">
<link rel=icon type=image/png sizes=16x16 href="https://blog.hook.sh/favicon-16x16.png?v=1644715216">
<link rel=manifest href=https://blog.hook.sh/webmanifest.json>
<meta name=msapplication-TileColor content="#303030">
<meta name=theme-color content="#303030">
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=https://blog.hook.sh/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Назад</span>
</a>
</div>
<main class="main full-width">
<article class="has-image main-article">
<header class=article-header>
<div class=article-image>
<a href=/ssh-honeypot/>
<img src=/ssh-honeypot/cover_hu3201198c97328eef28a158f0c8170276_222779_800x0_resize_q75_box.jpg srcset="/ssh-honeypot/cover_hu3201198c97328eef28a158f0c8170276_222779_800x0_resize_q75_box.jpg 800w, /ssh-honeypot/cover_hu3201198c97328eef28a158f0c8170276_222779_1600x0_resize_q75_box.jpg 1600w" width=800 height=400 loading=lazy alt="Featured image of post SSH Honeypot — просто и со вкусом">
</a>
</div>
<div class=article-details>
<header class=article-category>
<a href=/categories/adm/ style=background-color:#a67256;color:#fff>
Admin
</a>
</header>
<h2 class=article-title>
<a href=/ssh-honeypot/>SSH Honeypot — просто и со вкусом</a></h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2015.07.13</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
Время чтения: 5 мин.
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<div class=outdated-post style=display:none data-posted-at=2015-07-13>
<strong>Внимание!</strong> Данный пост был опубликован более года назад и, возможно, уже утратил свою былую актуальность. Но это не точно.
</div>
<blockquote>
<p><strong>Honeypot («Ловушка»)</strong> (англ. горшочек с мёдом) — ресурс, представляющий собой приманку для злоумышленников. (<a class=link href=https://ru.wikipedia.org/wiki/Honeypot target=_blank rel=noopener>wikipedia.org</a>)</p>
</blockquote>
<p>Одно из первых средств, которое применяется для аудита целевых систем - это сканирование портов с целью выявления, какие же службы (<em>сервисы</em>) там крутятся. Можете даже сейчас натравить <code>nmap</code> на свой сервер и посмотреть, что же он нам о нем расскажет. Самый простой пример результата его работы:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ nmap google.com

Starting Nmap 6.47 <span class=o>(</span> http://nmap.org <span class=o>)</span> at 2050-01-11 00:00 GMT
Nmap scan report <span class=k>for</span> google.com <span class=o>(</span>173.194.71.138<span class=o>)</span>
Host is up <span class=o>(</span>0.010s latency<span class=o>)</span>.
Other addresses <span class=k>for</span> google.com <span class=o>(</span>not scanned<span class=o>)</span>: 173.194.71.139 173.194.71.113 173.194.71.101 173.194.71.100 173.194.71.102
rDNS record <span class=k>for</span> 173.194.71.138: lb-in-f138.1e100.net
Not shown: <span class=m>998</span> filtered ports
PORT    STATE SERVICE
80/tcp  open  http
443/tcp open  https

Nmap <span class=k>done</span>: <span class=m>1</span> IP address <span class=o>(</span><span class=m>1</span> host up<span class=o>)</span> scanned in 4.92 seconds
</code></pre></div><p>Из которого мы видим, что на целевой системе открыты 2 порта (<em>стелс-сканирование и прочее мы пока опустим - не к чему оно сейчас</em>): <strong>80</strong>/tcp и <strong>443</strong>/tcp и это означает, что там наверняка крутится web-сервер, который работает по <strong>http</strong> и <strong>https</strong>.</p>
<p>Теперь подойдем к более интересному моменту.</p>
<p>Довольно часто администраторы используют для доступа к своим серверам <strong>SSH</strong>. Стандартный порт для SSH - <strong>22</strong>/tcp. Если администратор хоть чуть-чуть &ldquo;шарит&rdquo;, то после установки системы он сразу же перевешивает SSH на <strong>не</strong> стандартный порт (<em>например <code>454545</code></em>), запрещает логин от рута и настраивает авторизацию по сертификату вместо пароля. И оно совершенно правильно - держать SSH на стандартном порту, да без какой-либо дополнительной защиты - потенциально огромная брешь в безопасности.</p>
<p>А что если повесить на этот самый <code>22</code> порт ещё один ssh-демон, но при этом все попытки логина по нему сразу отправлять в fail2ban? Обычным нашим пользователям SSH не нужен, мы ходим через порт <code>454545</code>, значит тот, кто будет ломиться на <code>22</code> порт - бот или злоумышленник, которого необходимо забанить по IP на довольно длительное время. Обойти это ограничение можно будет лишь заюзав VPN, прокси или другое средство смены IP, ну или дождаться пока не пройдет время бана которое мы установим.</p>
<p>Данную задачу будем решать в 3 этапа:</p>
<ol>
<li>Настроим и запустим дополнительный <strong>sshd</strong>-демон, который будет висеть на <code>22</code> порту;</li>
<li>Настроим <strong>fail2ban</strong>, который будет читать логи на попытку коннекта по ssh на <code>22</code> порту;</li>
<li>Поставим всё это дело в автозапуск;</li>
</ol>
<blockquote>
<p>Все манипуляции буду производить на CentOS 7, разница с другими дистрибутивами - минимальна</p>
</blockquote>
<h2 id=настройка-и-запуск-дополнительного-sshd-демона>Настройка и запуск дополнительного sshd-демона</h2>
<p>Считаем, что <code>sshd</code> у нас уже сейчас настроен и висит на отличном от <code>22</code> порту. Переходим в директорию с его конфигами и создаем новый конфиг для honeypot:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>cd</span> /etc/ssh
$ nano ./sshd_config_honeypot
</code></pre></div><p>Пишем в него следующее (<em>самые интересные моменты пометил желтым цветом</em>):</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=na>Port 22</span>
<span class=na>AddressFamily inet</span>
<span class=na>SyslogFacility AUTH</span>
<span class=na>LogLevel VERBOSE</span>

<span class=na>PermitRootLogin no</span>
<span class=na>RSAAuthentication yes</span>
<span class=na>PubkeyAuthentication yes</span>
<span class=na>IgnoreRhosts yes</span>
<span class=na>RhostsRSAAuthentication no</span>
<span class=na>HostbasedAuthentication no</span>
<span class=na>IgnoreUserKnownHosts yes</span>
<span class=na>PermitEmptyPasswords no</span>
<span class=na>ChallengeResponseAuthentication no</span>
<span class=na>PasswordAuthentication no</span>
<span class=na>X11Forwarding no</span>
<span class=na>UsePAM yes</span>
<span class=na>UseDNS no</span>
<span class=na>AllowUsers nobody</span>

<span class=na>MaxAuthTries 1</span>
<span class=na>MaxSessions 1</span>
</code></pre></div><p>И после чего запускаем новый экземпляр <code>sshd</code>, но работающий именно с этим конфигом:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ /usr/sbin/sshd -f /etc/ssh/sshd_config_honeypot
$ ps ax <span class=p>|</span> grep sshd
  <span class=m>803</span> ?        Ss     0:00 /usr/sbin/sshd -D
 <span class=m>2549</span> ?        Ss     0:00 /usr/sbin/sshd -f /etc/ssh/sshd_config_honeypot
<span class=m>14627</span> ?        Ss     0:00 sshd: root@pts/1
<span class=m>14804</span> pts/1    R+     0:00 grep --color<span class=o>=</span>auto sshd
$ iptables -L -n  <span class=p>|</span> grep <span class=s1>&#39;:22&#39;</span>
$
</code></pre></div><blockquote>
<p>Для остановки демона можно выполнить (где <code>2549</code> это <code>PID</code> нашего процесса):</p>
</blockquote>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>kill</span> <span class=m>2549</span>
</code></pre></div><p>Если демон у нас корректно запустился - в STDOUT/STDERR ничего критично не сказал, в процессах успешно завертелся, <code>iptables</code> у нас <code>22</code> порт не блокирует, пробуем подключиться к серваку с нашей машины:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ ssh -p <span class=m>22</span> -l nobody 2.2.2.2
Permission denied <span class=o>(</span>publickey<span class=o>)</span>.
</code></pre></div><p>И тут де чекаем лог на сервере:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ tail -n40 /var/log/messages <span class=p>|</span> grep sshd
Jul <span class=m>13</span> 12:03:28 zero sshd<span class=o>[</span>14869<span class=o>]</span>: Connection from 1.1.1.1 port <span class=m>1277</span> on 2.2.2.2 port <span class=m>22</span>
Jul <span class=m>13</span> 12:03:28 zero sshd<span class=o>[</span>14869<span class=o>]</span>: Connection closed by 1.1.1.1 <span class=o>[</span>preauth<span class=o>]</span>
</code></pre></div><p>Если у тебя картина выгляди аналогично, значит всё работает как надо :) Попытки авторизации у нас обламываются, лог корректно пишется.</p>
<h2 id=настройка-fail2ban>Настройка fail2ban</h2>
<p>Переходим в директорию с fail2ban и первым делом создаем новый фильтр:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>cd</span> /etc/fail2ban
$ nano ./filter.d/sshd-honeypot.conf
</code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=c1># Example:</span>
<span class=c1># Jul 13 09:18:28 zero sshd[8625]: Connection from 1.1.1.1 port 1218 on 2.2.2.2 port 22</span>

<span class=k>[Definition]</span>
<span class=na>failregex</span> <span class=o>=</span> <span class=s>^.+ sshd\[\d+\]: (C|c)onnection from &lt;HOST&gt; port \d+ on \d+\.\d+\.\d+\.\d+ port 22$</span>
<span class=na>ignoreregex</span> <span class=o>=</span>
</code></pre></div><p>Сохраняем, проверяем работоспособность фильтра (<em>важно, чтобы <code>matched</code> было не равно нулю, но и не было сильно больше количества наших попыток коннектов по ssh</em>):</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ fail2ban-regex /var/log/messages /etc/fail2ban/filter.d/sshd-honeypot.conf <span class=p>|</span> grep matched
Lines: <span class=m>2001</span> lines, <span class=m>0</span> ignored, <span class=m>1</span> matched, <span class=m>2000</span> missed <span class=o>[</span>processed in 0.20 sec<span class=o>]</span>
</code></pre></div><p>После чего добавляем новый <code>jail</code> (<code>/etc/fail2ban/jail.local</code>):</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=k>[ssh-honeypot]</span>
<span class=na>enabled</span>  <span class=o>=</span> <span class=s>true</span>
<span class=na>filter</span>   <span class=o>=</span> <span class=s>sshd-honeypot</span>
<span class=na>action</span>   <span class=o>=</span> <span class=s>iptables-allports[name=&#34;ssh_honeypot&#34;, protocol=&#34;all&#34;]</span>
<span class=na>maxretry</span> <span class=o>=</span> <span class=s>1</span>
<span class=na>findtime</span> <span class=o>=</span> <span class=s>10</span>
<span class=c1># 86400 is 1 day, 259200 is 3 days</span>
<span class=na>bantime</span>  <span class=o>=</span> <span class=s>259200</span>
<span class=na>logpath</span>  <span class=o>=</span> <span class=s>/var/log/messages</span>
</code></pre></div><blockquote>
<p>Настоятельно рекомендую добавить свой IP адрес в <code>ignoreip</code> (<em>секции <code>[DEFAULT]</code></em>), так как есть риск забанить себя на трое суток :) Формат записи следующий (использую <code>1.1.1.0/8</code> т.к. IP серый):</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=k>[DEFAULT]</span>
<span class=na>ignoreip</span> <span class=o>=</span> <span class=s>127.0.0.1/8 2.2.2.2 1.1.1.0/8</span>
</code></pre></div><p>Или как минимум выставить <code>bantime</code> равным, например, <code>30</code> (секундам) - достаточно для того, чтобы проверить и при этом не получить массу неудобств.</p>
</blockquote>
<p>Перезапускаем fail2ban, проверяем лог:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ service fail2ban restart
$ cat /var/log/fail2ban.log <span class=p>|</span> grep <span class=s1>&#39; ERROR &#39;</span>
</code></pre></div><p>Если лог у нас не содержит никаких критичных ошибок, то остается дело за малым - проверить, будет ли срабатывать правило. Cнова пытаемся приконнектиться к серверу с нашей машины:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ ssh -p <span class=m>22</span> -l nobody 2.2.2.2
</code></pre></div><p>Смотрим на появление строки похожей на следующую в логе fail2ban:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ cat /var/log/fail2ban.log <span class=p>|</span> grep ssh-honeypot
2050-01-11 01:00:00,000 fail2ban.filter <span class=o>[</span>15038<span class=o>]</span>: INFO <span class=o>[</span>ssh-honeypot<span class=o>]</span> Ignore 1.1.1.1 by ip
</code></pre></div><p>Если так оно и есть - значит всё отлично работает - наш IP не был забанен только потому, что он находится в списке игнорируемых :)</p>
<h2 id=автозапуск>Автозапуск</h2>
<p>В автозапуске нуждается лишь наш дополнительный демон <code>sshd</code>, т.к. fail2ban у тебя и так наверняка уже стартует вместе с системой.</p>
<p>Добавим в файл <code>/etc/rc.local</code> следующую запись:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1>## sshd honeypot autostart</span>
<span class=nv>ssh_honeypot_config</span><span class=o>=</span><span class=s1>&#39;/etc/ssh/sshd_config_honeypot&#39;</span><span class=p>;</span>
<span class=k>if</span> <span class=o>[</span> -f <span class=nv>$ssh_honeypot_config</span> <span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=o>[</span> -x /usr/sbin/sshd <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
  /usr/sbin/sshd -f <span class=nv>$ssh_honeypot_config</span><span class=p>;</span>
<span class=k>fi</span><span class=p>;</span>
</code></pre></div><p>Которая будет проверять наличие бинарника <code>sshd</code> и наличия нужного конфига. Если два этих условия выполняются, запускаем демона уже знакомым нам методом. Для верности можешь ребутнуть сервер и убедиться, что всё работает.</p>
<p>Теперь пускай все желающие ломятся на наш SSH - результат для них будет лишь один :)</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/ban/>ban</a>
<a href=/tags/bash/>bash</a>
<a href=/tags/centos/>centos</a>
<a href=/tags/fail2ban/>fail2ban</a>
<a href=/tags/iptables/>iptables</a>
<a href=/tags/linux/>linux</a>
<a href=/tags/security/>security</a>
<a href=/tags/shell/>shell</a>
<a href=/tags/ssh/>ssh</a>
</section>
<div style=display:flex;justify-content:space-between;margin-top:1em>
<div>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>WTFPL</span>
</section>
</div>
<div style=margin-left:auto><section style=height:100%>
<a href=https://github.com/hook-sh/blog/edit/master/content/post/ssh-honeypot/index.md style=font-size:.7em;color:var(--card-text-color-tertiary)>Редиктировать</a>
</section>
</div>
</div></footer>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>Может быть интересно</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article class=has-image>
<a href=/little-iptables-tips/>
<div class=article-image>
<img src=/little-iptables-tips/cover.46786305ea94fea9001f78310af2161c_huca17b364cb926e2346fafd474740dcec_161710_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=little-iptables-tips data-hash="md5-RnhjBeqU/qkAH3gxCvIWHA==">
</div>
<div class=article-details>
<h2 class=article-title>Маленькая хитрость iptables</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/iptables-for-docker-swarm/>
<div class=article-image>
<img src=/iptables-for-docker-swarm/cover.46786305ea94fea9001f78310af2161c_huca17b364cb926e2346fafd474740dcec_161710_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=iptables-for-docker-swarm data-hash="md5-RnhjBeqU/qkAH3gxCvIWHA==">
</div>
<div class=article-details>
<h2 class=article-title>Настройка iptables для swarm кластера</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/compile-and-config-msmtp/>
<div class=article-image>
<img src=/compile-and-config-msmtp/cover.74e5f5752c378bc5c249233e9c0f8284_hub577c79af8463c924351e5a1445741f0_93501_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=compile-and-config-msmtp data-hash="md5-dOX1dSw3i8XCSSM+nA+ChA==">
</div>
<div class=article-details>
<h2 class=article-title>Собираем и настраиваем msmtp</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/setup-private-proxy-server/>
<div class=article-image>
<img src=/setup-private-proxy-server/cover.a7487377d94a76a3454be12889ada512_hu07b4d3c852e20c10f4c2e2e158cf3f2d_95916_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=setup-private-proxy-server data-hash="md5-p0hzd9lKdqNFS+Eoia2lEg==">
</div>
<div class=article-details>
<h2 class=article-title>Поднимаем свой, приватный прокси-сервер</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/hydra-bruteforce-passwd/>
<div class=article-image>
<img src=/hydra-bruteforce-passwd/cover.fff02c4fcb70f8cebc47ccddac17f5c7_hu11c621eb481740cf2341ae6f4505da8a_36564_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=hydra-bruteforce-passwd data-hash="md5-//AsT8tw+M68R8zdrBf1xw==">
</div>
<div class=article-details>
<h2 class=article-title>Брутим пароли с Гидрой (hydra)</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<script src=https://utteranc.es/client.js repo=hook-sh/blog issue-term=pathname crossorigin=anonymous async></script>
<style>.utterances{max-width:unset}</style>
<script>function setUtterancesTheme(b){let a=document.querySelector('.utterances iframe');a&&a.contentWindow.postMessage({type:'set-theme',theme:`github-${b}`},'https://utteranc.es')}addEventListener('message',a=>{if(a.origin!=='https://utteranc.es')return;setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener('onColorSchemeChange',a=>{setUtterancesTheme(a.detail)})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2014 -
2022 blog [dot] hook
</section>
<section class=powerby>
Make love, not war <br>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Содержание</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#настройка-и-запуск-дополнительного-sshd-демона>Настройка и запуск дополнительного sshd-демона</a></li>
<li><a href=#настройка-fail2ban>Настройка fail2ban</a></li>
<li><a href=#автозапуск>Автозапуск</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
<script data-no-instant>(function(){const a=document.querySelectorAll('.outdated-post'),b=new Date;for(let c=0,f=a.length;c<f;c++){const d=a[c],e=new Date(d.getAttribute('data-posted-at'));if(!isNaN(e.valueOf())&&e.getFullYear()>1){const a=Math.abs(b.getTime()-e.getTime()),c=Math.ceil(a/(1e3*3600*24));c>=547&&(d.style.display='block',d.style.visibility='visible')}}})()</script>
</body>
</html>