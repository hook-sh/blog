<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="–°–µ–≥–æ–¥–Ω—è –º—ã –±—É–¥–µ–º –ø–æ–¥–Ω–∏–º–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —à—É—Å—Ç—Ä–µ–Ω—å–∫–∏–π proxy/socks —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–µ–±—è-–ª—é–±–∏–º–æ–≥–æ. –¢–∞–∫ —á—Ç–æ–± –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑, –¥–∞ –∏ –∑–∞–±—ã—Ç—å - –ø—É—Å–∫–∞–π –ø—ã—Ö—Ç–∏—Ç –¥–∞ –Ω–∞–º –Ω–∞ —Ä–∞–¥–æ—Å—Ç—å.
–ë—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å —á—Ç–æ —Ç—ã —É–∂–µ –ø—Ä–∏–æ–±—Ä–µ–ª —Å–µ–±–µ –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π vps, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –û–° –≤—ã–±—Ä–∞–ª Cent OS 7 –∏ –ø–æ–¥—Ü–µ–ø–∏–ª—Å—è –∫ –Ω–µ–º—É –ø–æ SSH, –Ω–∞–±–ª—é–¥–∞—è –¥–µ–≤—Å—Ç–≤–µ–Ω–Ω—É—é —á–∏—Å—Ç–æ—Ç—É. –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Ç—é–Ω–∏–º SSH:
"><title>–ü–æ–¥–Ω–∏–º–∞–µ–º —Å–≤–æ–π, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä</title>
<link rel=canonical href=https://blog.hook.sh/setup-private-proxy-server/>
<link rel=stylesheet href=https://blog.hook.sh/scss/style.min.34b629f31c5d473ce517c990918273ec1d17e1834d7e3e85bbb174f4ba5967e4.css>
<meta property="og:title" content="–ü–æ–¥–Ω–∏–º–∞–µ–º —Å–≤–æ–π, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä">
<meta property="og:description" content="–°–µ–≥–æ–¥–Ω—è –º—ã –±—É–¥–µ–º –ø–æ–¥–Ω–∏–º–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —à—É—Å—Ç—Ä–µ–Ω—å–∫–∏–π proxy/socks —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–µ–±—è-–ª—é–±–∏–º–æ–≥–æ. –¢–∞–∫ —á—Ç–æ–± –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑, –¥–∞ –∏ –∑–∞–±—ã—Ç—å - –ø—É—Å–∫–∞–π –ø—ã—Ö—Ç–∏—Ç –¥–∞ –Ω–∞–º –Ω–∞ —Ä–∞–¥–æ—Å—Ç—å.
–ë—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å —á—Ç–æ —Ç—ã —É–∂–µ –ø—Ä–∏–æ–±—Ä–µ–ª —Å–µ–±–µ –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π vps, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –û–° –≤—ã–±—Ä–∞–ª Cent OS 7 –∏ –ø–æ–¥—Ü–µ–ø–∏–ª—Å—è –∫ –Ω–µ–º—É –ø–æ SSH, –Ω–∞–±–ª—é–¥–∞—è –¥–µ–≤—Å—Ç–≤–µ–Ω–Ω—É—é —á–∏—Å—Ç–æ—Ç—É. –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Ç—é–Ω–∏–º SSH:
">
<meta property="og:url" content="https://blog.hook.sh/setup-private-proxy-server/">
<meta property="og:site_name" content="blog [dot] hook">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="anonymous"><meta property="article:tag" content="centos"><meta property="article:tag" content="proxy"><meta property="article:published_time" content="2016-08-13T10:57:36+00:00"><meta property="article:modified_time" content="2016-08-13T10:57:36+00:00"><meta property="og:image" content="https://blog.hook.sh/setup-private-proxy-server/cover.jpg">
<meta name=twitter:title content="–ü–æ–¥–Ω–∏–º–∞–µ–º —Å–≤–æ–π, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä">
<meta name=twitter:description content="–°–µ–≥–æ–¥–Ω—è –º—ã –±—É–¥–µ–º –ø–æ–¥–Ω–∏–º–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —à—É—Å—Ç—Ä–µ–Ω—å–∫–∏–π proxy/socks —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–µ–±—è-–ª—é–±–∏–º–æ–≥–æ. –¢–∞–∫ —á—Ç–æ–± –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑, –¥–∞ –∏ –∑–∞–±—ã—Ç—å - –ø—É—Å–∫–∞–π –ø—ã—Ö—Ç–∏—Ç –¥–∞ –Ω–∞–º –Ω–∞ —Ä–∞–¥–æ—Å—Ç—å.
–ë—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å —á—Ç–æ —Ç—ã —É–∂–µ –ø—Ä–∏–æ–±—Ä–µ–ª —Å–µ–±–µ –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π vps, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –û–° –≤—ã–±—Ä–∞–ª Cent OS 7 –∏ –ø–æ–¥—Ü–µ–ø–∏–ª—Å—è –∫ –Ω–µ–º—É –ø–æ SSH, –Ω–∞–±–ª—é–¥–∞—è –¥–µ–≤—Å—Ç–≤–µ–Ω–Ω—É—é —á–∏—Å—Ç–æ—Ç—É. –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Ç—é–Ω–∏–º SSH:
"><meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blog.hook.sh/setup-private-proxy-server/cover.jpg">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1B4Z5Q844N"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-1B4Z5Q844N',{anonymize_ip:!0})}</script>
<link rel=apple-touch-icon sizes=180x180 href="https://blog.hook.sh/apple-touch-icon.png?v=1644330544">
<link rel=icon type=image/png sizes=32x32 href="https://blog.hook.sh/favicon-32x32.png?v=1644330544">
<link rel=icon type=image/png sizes=16x16 href="https://blog.hook.sh/favicon-16x16.png?v=1644330544">
<link rel=manifest href=https://blog.hook.sh/webmanifest.json>
<meta name=msapplication-TileColor content="#303030">
<meta name=theme-color content="#303030">
</head>
<body class=article-page>
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
on-phone--column extended">
<aside class="sidebar left-sidebar sticky">
<button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –º–µ–Ω—é">
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
<header class=site-info>
<figure class=site-avatar>
<img src=/img/avatar_hue658fef614f31dcef52d9d8424d0f90e_66341_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>üíª</span>
</figure>
<h1 class=site-name><a href=https://blog.hook.sh/>blog [dot] hook</a></h1>
<h2 class=site-description>–ê–≤—Ç–æ—Ä—Å–∫–∏–π –±–ª–æ–≥ –æ–± IT –∏ –ø—Ä–æ—á–µ–π —Ö**–Ω–µ</h2>
</header>
<ol class=menu id=main-menu>
<li>
<a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>–ì–ª–∞–≤–Ω–∞—è</span>
</a>
</li>
<li>
<a href=/page/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>–ê—Ä—Ö–∏–≤</span>
</a>
</li>
<li>
<a href=/page/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>–ü–æ–∏—Å–∫</span>
</a>
</li>
<li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</span>
</li>
</ol>
</aside>
<main class="main full-width">
<article class="has-image main-article">
<header class=article-header>
<div class=article-image>
<a href=/setup-private-proxy-server/>
<img src=/setup-private-proxy-server/cover_hu07b4d3c852e20c10f4c2e2e158cf3f2d_95916_800x0_resize_q75_box.jpg srcset="/setup-private-proxy-server/cover_hu07b4d3c852e20c10f4c2e2e158cf3f2d_95916_800x0_resize_q75_box.jpg 800w, /setup-private-proxy-server/cover_hu07b4d3c852e20c10f4c2e2e158cf3f2d_95916_1600x0_resize_q75_box.jpg 1600w" width=800 height=400 loading=lazy alt="Featured image of post –ü–æ–¥–Ω–∏–º–∞–µ–º —Å–≤–æ–π, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä">
</a>
</div>
<div class=article-details>
<header class=article-category>
<a href=/categories/adm/ style=background-color:#a67256;color:#fff>
Admin
</a>
</header>
<h2 class=article-title>
<a href=/setup-private-proxy-server/>–ü–æ–¥–Ω–∏–º–∞–µ–º —Å–≤–æ–π, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä</a></h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2016.08.13</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
–í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è: 4 –º–∏–Ω.
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<div class=outdated-post style=display:none data-posted-at=2016-08-13>
<strong>–í–Ω–∏–º–∞–Ω–∏–µ!</strong> –î–∞–Ω–Ω—ã–π –ø–æ—Å—Ç –±—ã–ª –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –±–æ–ª–µ–µ –≥–æ–¥–∞ –Ω–∞–∑–∞–¥ –∏, –≤–æ–∑–º–æ–∂–Ω–æ, —É–∂–µ —É—Ç—Ä–∞—Ç–∏–ª —Å–≤–æ—é –±—ã–ª—É—é –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å. –ù–æ —ç—Ç–æ –Ω–µ —Ç–æ—á–Ω–æ.
</div>
<p>–°–µ–≥–æ–¥–Ω—è –º—ã –±—É–¥–µ–º –ø–æ–¥–Ω–∏–º–∞—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–π –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —à—É—Å—Ç—Ä–µ–Ω—å–∫–∏–π proxy/socks —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–µ–±—è-–ª—é–±–∏–º–æ–≥–æ. –¢–∞–∫ —á—Ç–æ–± –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑, –¥–∞ –∏ –∑–∞–±—ã—Ç—å - –ø—É—Å–∫–∞–π –ø—ã—Ö—Ç–∏—Ç –¥–∞ –Ω–∞–º –Ω–∞ —Ä–∞–¥–æ—Å—Ç—å.</p>
<p>–ë—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å —á—Ç–æ —Ç—ã —É–∂–µ –ø—Ä–∏–æ–±—Ä–µ–ª —Å–µ–±–µ –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π vps, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –û–° –≤—ã–±—Ä–∞–ª Cent OS 7 –∏ –ø–æ–¥—Ü–µ–ø–∏–ª—Å—è –∫ –Ω–µ–º—É –ø–æ SSH, –Ω–∞–±–ª—é–¥–∞—è –¥–µ–≤—Å—Ç–≤–µ–Ω–Ω—É—é —á–∏—Å—Ç–æ—Ç—É. –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Ç—é–Ω–∏–º SSH:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1># –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –º–µ–Ω—è–µ–º –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤ –ø–∏—Å—å–º–µ –Ω–∞ –Ω–æ–≤—ã–π:</span>
$ passwd
<span class=c1># –ü–µ—Ä–µ–≤–µ—à–∏–≤–∞–µ–º SSH –Ω–∞ –ø–æ—Ä—Ç 7788:</span>
$ sed -i -r <span class=s2>&#34;s/#Port 22/Port 7788/&#34;</span> /etc/ssh/sshd_config
<span class=c1># –¢—Ä–µ–±—É–µ–º –≤—Ç–æ—Ä—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞:</span>
$ sed -i -r -e <span class=s2>&#34;s/#Protocol 2/Protocol 2/&#34;</span> -e <span class=s2>&#34;s/#MaxAuthTries 6/MaxAuthTries 1/&#34;</span> /etc/ssh/sshd_config
<span class=c1># –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∫–ª—é—á–∞–µ–º selinux, —Ç–∞–∫ –∫–∞–∫ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –æ–Ω –æ—Ç–∫—Ä–æ–≤–µ–Ω–Ω–æ –ª–∏—à–Ω–∏–π</span>
<span class=c1># –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –¥–µ–º–æ–Ω–∞:</span>
$ service sshd restart
<span class=c1># –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏–∑–º–µ–Ω–∏–ª—Å—è –ª–∏ –ø–æ—Ä—Ç:</span>
$ ss -tnlp <span class=p>|</span> grep ssh
LISTEN     <span class=m>0</span>      <span class=m>128</span>        *:7788        *:*     users:<span class=o>((</span><span class=s2>&#34;sshd&#34;</span>,pid<span class=o>=</span>1029,fd<span class=o>=</span>3<span class=o>))</span>
LISTEN     <span class=m>0</span>      <span class=m>128</span>       :::7788       :::*     users:<span class=o>((</span><span class=s2>&#34;sshd&#34;</span>,pid<span class=o>=</span>1029,fd<span class=o>=</span>4<span class=o>))</span>
<span class=c1># –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç 7788:</span>
$ firewall-cmd --zone<span class=o>=</span>public --add-port<span class=o>=</span>7788/tcp --permanent
$ firewall-cmd --reload
<span class=c1># –í—ã—Ö–æ–¥–∏–º –∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ **–Ω–æ–≤—ã–π** –ø–æ—Ä—Ç</span>
$ <span class=nb>logout</span>
</code></pre></div><p>–ó–∞–π–º–µ–º—Å—è –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ–º –∏–∑–ª–∏—à–Ω–µ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è, –∏ —á—É—Ç–∫–∞ –Ω–∞–≤–µ–¥–µ–º –∫—Ä–∞—Å–æ—Ç—É:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>unset</span> HISTFILE
$ <span class=nb>echo</span> <span class=s1>&#39;unset HISTFILE&#39;</span> &gt;&gt; /etc/bashrc
<span class=c1># –°—Ç–∞–≤–∏–º –Ω–∞–Ω–æ –∏ –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –µ–≥–æ –∫–∞–∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</span>
$ yum -y install nano
$ <span class=nb>echo</span> <span class=s1>&#39;export VISUAL=nano&#39;</span> &gt;&gt; /etc/bashrc
$ <span class=nb>echo</span> <span class=s1>&#39;export EDITOR=nano&#39;</span> &gt;&gt; /etc/bashrc
<span class=c1># –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:</span>
<span class=c1># $ service rsyslog stop &amp;&amp; systemctl disable syslog</span>
<span class=c1># $ service auditd stop &amp;&amp; systemctl disable auditd</span>
$ unlink /var/log/lastlog <span class=o>&amp;&amp;</span> ln -s /dev/null /var/log/lastlog
$ unlink /var/log/audit/audit.log <span class=o>&amp;&amp;</span> ln -s /dev/null /var/log/audit/audit.log
$ unlink /var/log/secure <span class=o>&amp;&amp;</span> ln -s /dev/null /var/log/secure
$ unlink /var/log/wtmp <span class=o>&amp;&amp;</span> ln -s /dev/null /var/log/wtmp
$ unlink /var/log/btmp <span class=o>&amp;&amp;</span> ln -s /dev/null /var/log/btmp
$ rm -f ~/.bash_history
<span class=c1># –ö—Ä–∞—Å–æ—Ç—É–ª—å–∫–∏</span>
$ <span class=nb>echo</span> <span class=s1>&#39;proxy-server&#39;</span> &gt; /etc/hostname
$ hostname proxy-server
$ <span class=nb>echo</span> <span class=s1>&#39;export PS1=&#34;\[$(tput bold)\]\[$(tput setaf 7)\][\[$(tput setaf 1)\]\u\[$(tput setaf 7)\]@\[$(tput setaf 5)\]\h \[$(tput setaf 2)\]\w\[$(tput setaf 7)\]]\\$ \[$(tput sgr0)\]&#34;&#39;</span> &gt;&gt; /etc/bashrc
<span class=c1># –†–µ–±—É—Ç–∏–º, —Ü–µ–ø–ª—è–µ–º—Å—è –ø–æ –Ω–æ–≤–æ–π, –ø—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ –Ω–∞ —á–∏—Å—Ç–æ—Ç—É grep -rnw &#39;/var&#39; -e &#34;%your_real_ap_addr%&#34;</span>
$ reboot
</code></pre></div><p>–¢–µ–ø–µ—Ä—å –ø–æ—Å—Ç–∞–≤–∏–º –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä 3proxy (aka –∑–∞—Ä–∞–∑–∞-–ø—Ä–æ–∫—Å–∏) –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤, –∏ –Ω–∞—Å—Ç—Ä–æ–∏–º –µ–≥–æ:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>cd</span> ~
$ yum -y install gcc
$ wget https://github.com/z3APA3A/3proxy/archive/3proxy-0.8.6.tar.gz
$ tar -xvzf 3proxy-*.gz
$ <span class=nb>cd</span> 3proxy-3proxy-*
$ sed -i <span class=s1>&#39;1s/^/#define ANONYMOUS 1\n/&#39;</span> ./src/proxy.h <span class=c1># –î–µ–ª–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–Ω–æ–Ω–∏–º–Ω—ã–º</span>
$ make -f Makefile.Linux
$ mkdir -p /usr/local/etc/3proxy/bin
$ touch /usr/local/etc/3proxy/3proxy.pid
$ cp ./src/3proxy /usr/local/etc/3proxy/bin
$ cp ./scripts/rc.d/proxy.sh /etc/init.d/3proxy
$ cp ./cfg/3proxy.cfg.sample /usr/local/etc/3proxy/3proxy.cfg
$ ln -s /usr/local/etc/3proxy/3proxy.cfg /etc/3proxy.cfg
$ chmod +x /etc/init.d/3proxy
<span class=c1># –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º:</span>
$ nano /etc/3proxy.cfg
</code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=na>daemon</span>

<span class=na>pidfile /usr/local/etc/3proxy/3proxy.pid</span>

<span class=na>nserver 8.8.4.4</span>
<span class=na>nserver 8.8.8.8</span>
<span class=na>nscache 65536</span>

<span class=na>timeouts 1 5 30 60 180 1800 15 60</span>
<span class=na>log /dev/null</span>

<span class=na>auth none</span>
<span class=na>maxconn 64</span>
<span class=na>proxy -p13231 -n -a</span>
<span class=na>socks -p14541 -n -a</span>
</code></pre></div><p>–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –ª–æ–≥ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –Ω–µ –ø–∏—à–µ—Ç; –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∏–∫–∞–∫–∏—Ö –ø–∞—Ä–æ–ª–µ–π –Ω–µ –ø—Ä–æ—Å–∏—Ç; proxy —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É <code>13231</code>, socks –Ω–∞ <code>14541</code>; —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω —Å –ø—Ä–∞–≤–∞–º–∏ root <em>(–¥–∞ –∏ –Ω–∞—Å—Ä–∞—Ç—å)</em>.</p>
<p>–ó–∞–ø—É—Å–∫–∞–µ–º –µ–≥–æ –∏ —Å—Ç–∞–≤–∏–º –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ service 3proxy start
$ systemctl <span class=nb>enable</span> 3proxy
</code></pre></div><p>–ò –µ—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ - —Å–Ω–æ—Å–∏–º –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ 3proxy –∫–∞–∫ —É–∂–µ –Ω–µ –Ω—É–∂–Ω—ã–µ:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ rm -Rf ~/3proxy-*
</code></pre></div><p>–î–∞–ª—å—à–µ - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–≥–Ω–µ–Ω–Ω—É—é —Å—Ç–µ–Ω—É:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1># –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç –¥–ª—è http- –∏ socks- –ø—Ä–æ–∫—Å–∏:</span>
$ firewall-cmd --zone<span class=o>=</span>public --add-port<span class=o>=</span>13231/tcp --permanent
$ firewall-cmd --zone<span class=o>=</span>public --add-port<span class=o>=</span>14541/tcp --permanent
$ firewall-cmd --reload

<span class=c1># –ë–ª–æ–∫–∏—Ä—É–µ–º ICMP —Ç—Ä–∞—Ñ–∏–∫ (echo-–∑–∞–ø—Ä–æ—Å—ã) –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–± –Ω–∞—à —Å–µ—Ä–≤–µ—Ä **–Ω–µ –æ—Ç–≤–µ—á–∞–ª** –Ω–∞ –ø–∏–Ω–≥–∏:</span>
<span class=c1># –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ:</span>
$ firewall-cmd --zone<span class=o>=</span>public --query-icmp-block<span class=o>=</span>echo-reply
$ firewall-cmd --zone<span class=o>=</span>public --query-icmp-block<span class=o>=</span>echo-request
<span class=c1># –ë–ª–æ–∫–∏—Ä—É–µ–º:</span>
$ firewall-cmd --zone<span class=o>=</span>public --add-icmp-block<span class=o>=</span>echo-reply --permanent
$ firewall-cmd --zone<span class=o>=</span>public --add-icmp-block<span class=o>=</span>echo-request --permanent
<span class=c1># –ü–µ—Ä–µ—á–∏—Ç–∞–µ–º –ø—Ä–∞–≤–∏–ª–∞:</span>
$ firewall-cmd --reload
<span class=c1># –ò –ø—Ä–æ–≤–µ—Ä–∏–º —Ç–µ–ø–µ—Ä—å:</span>
$ firewall-cmd --zone<span class=o>=</span>public --query-icmp-block<span class=o>=</span>echo-reply
$ firewall-cmd --zone<span class=o>=</span>public --query-icmp-block<span class=o>=</span>echo-request
</code></pre></div><p>–ò –ø—Ä–æ–≤–µ—Ä—è–µ–º - –≤—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å. –®—É—Å—Ç—Ä–µ–Ω—å–∫–∏–π –∏ –±–µ—Å–ø–∞–ª–µ–≤–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤! –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞—Ö–æ–¥–∏–º —á–µ—Ä–µ–∑ –Ω–µ–≥–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ 2ip.ru, –∏ –≤–∏–¥–∏–º:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>–û—Ç–∫—É–¥–∞ –≤—ã: Ukraine –£–∫—Ä–∞–∏–Ω–∞, –ö–∏–µ–≤
–í–∞—à –ø—Ä–æ–≤–∞–π–¥–µ—Ä: –í–µ—Å—Ç–ö–æ–ª–ª –î–æ–º–∞—à–Ω–∏–µ —Å–µ—Ç–∏
</code></pre></div><blockquote>
<p>–õ—É—á—à–µ –±—É–¥–µ—Ç –µ—â—ë –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫—Ä–æ–Ω —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=m>30</span> */3 * * * service 3proxy restart
<span class=m>0</span> */12 * * * reboot -f
</code></pre></div></blockquote>
<p>–ù—É —Ä–∞–∑–≤–µ –Ω–µ –ø—Ä–æ—Ñ–∏—Ç, —É—á–∏—Ç—ã–≤–∞—è —á—Ç–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —Å–µ—Ä–≤–∞–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –º–æ—Å–∫–≤–µ?</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/anonymous/>anonymous</a>
<a href=/tags/centos/>centos</a>
<a href=/tags/proxy/>proxy</a>
</section>
<div style=display:flex;justify-content:space-between;margin-top:1em>
<div>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>WTFPL</span>
</section>
</div>
<div style=margin-left:auto><section style=height:100%>
<a href=https://github.com/hook-sh/blog/edit/master/content/post/setup-private-proxy-server/index.md style=font-size:.7em;color:var(--card-text-color-tertiary)>–†–µ–¥–∏–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
</section>
</div>
</div></footer>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>–ú–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article class=has-image>
<a href=/compile-and-config-msmtp/>
<div class=article-image>
<img src=/compile-and-config-msmtp/cover.74e5f5752c378bc5c249233e9c0f8284_hub577c79af8463c924351e5a1445741f0_93501_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=compile-and-config-msmtp data-hash="md5-dOX1dSw3i8XCSSM+nA+ChA==">
</div>
<div class=article-details>
<h2 class=article-title>–°–æ–±–∏—Ä–∞–µ–º –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º msmtp</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/little-iptables-tips/>
<div class=article-image>
<img src=/little-iptables-tips/cover.46786305ea94fea9001f78310af2161c_huca17b364cb926e2346fafd474740dcec_161710_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=little-iptables-tips data-hash="md5-RnhjBeqU/qkAH3gxCvIWHA==">
</div>
<div class=article-details>
<h2 class=article-title>–ú–∞–ª–µ–Ω—å–∫–∞—è —Ö–∏—Ç—Ä–æ—Å—Ç—å iptables</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/ssh-honeypot/>
<div class=article-image>
<img src=/ssh-honeypot/cover.a3b24e7c925b55ba3b2c0728bc5d5145_hu3201198c97328eef28a158f0c8170276_222779_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=ssh-honeypot data-hash="md5-o7JOfJJbVbo7LAcovF1RRQ==">
</div>
<div class=article-details>
<h2 class=article-title>SSH Honeypot ‚Äî –ø—Ä–æ—Å—Ç–æ –∏ —Å–æ –≤–∫—É—Å–æ–º</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/iptables-for-docker-swarm/>
<div class=article-image>
<img src=/iptables-for-docker-swarm/cover.46786305ea94fea9001f78310af2161c_huca17b364cb926e2346fafd474740dcec_161710_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=iptables-for-docker-swarm data-hash="md5-RnhjBeqU/qkAH3gxCvIWHA==">
</div>
<div class=article-details>
<h2 class=article-title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ iptables –¥–ª—è swarm –∫–ª–∞—Å—Ç–µ—Ä–∞</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/customize-nginx-error-pages/>
<div class=article-image>
<img src=/customize-nginx-error-pages/cover.d261db30b51bddbee50777133bdd2c68_hu6ae5f54eb95851fe70ad8a423f008f0a_46330_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=customize-nginx-error-pages data-hash="md5-0mHbMLUb3b7lB3cTO90saA==">
</div>
<div class=article-details>
<h2 class=article-title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –æ—à–∏–±–æ–∫ –¥–ª—è nginx</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<script src=https://utteranc.es/client.js repo=hook-sh/blog issue-term=pathname crossorigin=anonymous async></script>
<style>.utterances{max-width:unset}</style>
<script>function setUtterancesTheme(b){let a=document.querySelector('.utterances iframe');a&&a.contentWindow.postMessage({type:'set-theme',theme:`github-${b}`},'https://utteranc.es')}addEventListener('message',a=>{if(a.origin!=='https://utteranc.es')return;setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener('onColorSchemeChange',a=>{setUtterancesTheme(a.detail)})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2014 -
2022 blog [dot] hook
</section>
<section class=powerby>
Make love, not war <br>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
<script data-no-instant>(function(){const a=document.querySelectorAll('.outdated-post'),b=new Date;for(let c=0,f=a.length;c<f;c++){const d=a[c],e=new Date(d.getAttribute('data-posted-at'));if(!isNaN(e.valueOf())&&e.getFullYear()>1){const a=Math.abs(b.getTime()-e.getTime()),c=Math.ceil(a/(1e3*3600*24));c>=547&&(d.style.display='block',d.style.visibility='visible')}}})()</script>
</body>
</html>