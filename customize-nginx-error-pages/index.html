<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="При работе с web-ресурсом возникают ошибки, и причина их может быть совершенно различна - от опечатки в URL, до ошибок самого сервера. И если у нас внешним сервером является nginx - мы можем довольно удобно указать свое содержание, которое будет выводиться при той или иной ситуации. Во-первых, это позволяет в какой-то мере замаскировать используемое ПО (т.к. определение по сигнатурам ответа становится невозможным); во-вторых - это визуальная кастомизация, которая положительно говорит о ресурсе в целом.
"><title>Настройка страниц ошибок для nginx</title>
<link rel=canonical href=https://blog.hook.sh/customize-nginx-error-pages/>
<link rel=stylesheet href=https://blog.hook.sh/scss/style.min.11011b406a9d6a17fced5ecbfc52fd41c541086d59a06d93e286ac2dee3c2327.css>
<meta property="og:title" content="Настройка страниц ошибок для nginx">
<meta property="og:description" content="При работе с web-ресурсом возникают ошибки, и причина их может быть совершенно различна - от опечатки в URL, до ошибок самого сервера. И если у нас внешним сервером является nginx - мы можем довольно удобно указать свое содержание, которое будет выводиться при той или иной ситуации. Во-первых, это позволяет в какой-то мере замаскировать используемое ПО (т.к. определение по сигнатурам ответа становится невозможным); во-вторых - это визуальная кастомизация, которая положительно говорит о ресурсе в целом.
">
<meta property="og:url" content="https://blog.hook.sh/customize-nginx-error-pages/">
<meta property="og:site_name" content="blog [dot] hook">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="html"><meta property="article:tag" content="linux"><meta property="article:tag" content="nginx"><meta property="article:tag" content="service"><meta property="article:published_time" content="2015-03-03T06:41:38+00:00"><meta property="article:modified_time" content="2015-03-03T06:41:38+00:00"><meta property="og:image" content="https://blog.hook.sh/customize-nginx-error-pages/cover.jpg">
<meta name=twitter:title content="Настройка страниц ошибок для nginx">
<meta name=twitter:description content="При работе с web-ресурсом возникают ошибки, и причина их может быть совершенно различна - от опечатки в URL, до ошибок самого сервера. И если у нас внешним сервером является nginx - мы можем довольно удобно указать свое содержание, которое будет выводиться при той или иной ситуации. Во-первых, это позволяет в какой-то мере замаскировать используемое ПО (т.к. определение по сигнатурам ответа становится невозможным); во-вторых - это визуальная кастомизация, которая положительно говорит о ресурсе в целом.
"><meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://blog.hook.sh/customize-nginx-error-pages/cover.jpg">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1B4Z5Q844N"></script>
<script>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-1B4Z5Q844N',{anonymize_ip:!0})}</script>
<link rel=apple-touch-icon sizes=180x180 href="https://blog.hook.sh/apple-touch-icon.png?v=1644232340">
<link rel=icon type=image/png sizes=32x32 href="https://blog.hook.sh/favicon-32x32.png?v=1644232340">
<link rel=icon type=image/png sizes=16x16 href="https://blog.hook.sh/favicon-16x16.png?v=1644232340">
<link rel=manifest href=https://blog.hook.sh/webmanifest.json>
<meta name=msapplication-TileColor content="#303030">
<meta name=theme-color content="#303030">
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=https://blog.hook.sh/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Назад</span>
</a>
</div>
<main class="main full-width">
<article class="has-image main-article">
<header class=article-header>
<div class=article-image>
<a href=/customize-nginx-error-pages/>
<img src=/customize-nginx-error-pages/cover_hu6ae5f54eb95851fe70ad8a423f008f0a_46330_800x0_resize_q75_box.jpg srcset="/customize-nginx-error-pages/cover_hu6ae5f54eb95851fe70ad8a423f008f0a_46330_800x0_resize_q75_box.jpg 800w, /customize-nginx-error-pages/cover_hu6ae5f54eb95851fe70ad8a423f008f0a_46330_1600x0_resize_q75_box.jpg 1600w" width=800 height=400 loading=lazy alt="Featured image of post Настройка страниц ошибок для nginx">
</a>
</div>
<div class=article-details>
<header class=article-category>
<a href=/categories/adm/ style=background-color:#a67256;color:#fff>
Admin
</a>
</header>
<h2 class=article-title>
<a href=/customize-nginx-error-pages/>Настройка страниц ошибок для nginx</a></h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2015.03.03</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
Время чтения: 3 мин.
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<div class=outdated-post style=display:none data-posted-at=2015-03-03>
<strong>Внимание!</strong> Данный пост был опубликован более года назад и, возможно, уже утратил свою былую актуальность. Но это не точно.
</div>
<p>При работе с web-ресурсом возникают ошибки, и причина их может быть совершенно различна - от опечатки в URL, до ошибок самого сервера. И если у нас внешним сервером является nginx - мы можем довольно удобно указать свое содержание, которое будет выводиться при той или иной ситуации. Во-первых, это позволяет в какой-то мере замаскировать используемое ПО (т.к. определение по сигнатурам ответа становится невозможным); во-вторых - это визуальная кастомизация, которая положительно говорит о ресурсе в целом.</p>
<h1 id=указание-своих-страниц-ошибок>Указание своих страниц ошибок</h1>
<p>Для того, чтоб nginx вместо встроенных шаблонов отдавал нужный нам контент - существует следующая конструкция (<a class=link href=http://nginx.org/ru/docs/http/ngx_http_core_module.html#error_page target=_blank rel=noopener>документация</a>):</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=k>error_page</span> <span class=mi>401</span> <span class=s>/401.html</span><span class=p>;</span>
<span class=k>error_page</span> <span class=mi>404</span> <span class=s>/404.html</span><span class=p>;</span>
</code></pre></div><p>Которая нам говорит:</p>
<blockquote>
<p>В случае возникновения ошибки с кодом <code>401</code> вывести страницу <code>401.html</code>, которая находится в корне веб-ресурса, и т.д.</p>
</blockquote>
<h1 id=страницы-ошибок-вне-директории-ресурса>Страницы ошибок вне директории ресурса</h1>
<p>Отлично, но что нам делать, если хотим чтоб страницы ошибок лежали отдельно от корневой директории веб-сервера? Нам на помощь приходит <code>location</code> (<a class=link href=http://nginx.org/ru/docs/http/ngx_http_core_module.html#location target=_blank rel=noopener>документация</a>):</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=k>set</span> <span class=nv>$errordocs</span> <span class=s>/some/path/to/nginx-errordocs</span><span class=p>;</span>

<span class=k>error_page</span> <span class=mi>401</span> <span class=s>/401.html</span><span class=p>;</span>
<span class=k>location</span> <span class=p>=</span> <span class=s>/401.html</span> <span class=p>{</span>
  <span class=kn>root</span> <span class=nv>$errordocs</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>error_page</span> <span class=mi>404</span> <span class=s>/404.html</span><span class=p>;</span>
<span class=k>location</span> <span class=p>=</span> <span class=s>/404.html</span> <span class=p>{</span>
  <span class=kn>root</span> <span class=nv>$errordocs</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div><p>Которая говорит:</p>
<blockquote>
<p>Установим в переменную <code>$errordocs</code> значение <code>/some/path/to/nginx-errordocs</code>; в случае возникновения ошибки с кодом <code>401</code> вывести страницу <code>401.html</code>, которая находится в корне веб-ресурса; при запросе страницы <code>401.html</code> в корне веб-ресурса считать корнем веб-ресурса значение из <code>$errordocs</code>, и т.д. с описанными кодами ошибок</p>
</blockquote>
<h2 id=глобальные-страницы-ошибок>Глобальные страницы ошибок</h2>
<p>А теперь ещё один момент - у нас может быть несколько хостов на одном сервере, и прописывать одни и те же настройки для каждого - дело не логичное. Тем более, что если произойдут какие-либо изменения - везде придется их обновлять.</p>
<p>К сожалению, я не нашел способа сделать их глобальными для всех &ldquo;по умолчанию&rdquo;, но поступил следующим способом:</p>
<blockquote>
<p>Описываем все необходимые коды и страницы им соответствующие</p>
</blockquote>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=k>set</span> <span class=nv>$errordocs</span> <span class=s>/some/path/to/nginx-errordocs</span><span class=p>;</span>

<span class=k>error_page</span> <span class=mi>401</span> <span class=s>/401.html</span><span class=p>;</span>
<span class=k>location</span> <span class=p>=</span> <span class=s>/401.html</span> <span class=p>{</span>
  <span class=kn>root</span> <span class=nv>$errordocs</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>error_page</span> <span class=mi>403</span> <span class=s>/403.html</span><span class=p>;</span>
<span class=k>location</span> <span class=p>=</span> <span class=s>/403.html</span> <span class=p>{</span>
  <span class=kn>root</span> <span class=nv>$errordocs</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>error_page</span> <span class=mi>404</span> <span class=s>/404.html</span><span class=p>;</span>
<span class=k>location</span> <span class=p>=</span> <span class=s>/404.html</span> <span class=p>{</span>
  <span class=kn>root</span> <span class=nv>$errordocs</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>error_page</span> <span class=mi>500</span> <span class=s>/500.html</span><span class=p>;</span>
<span class=k>location</span> <span class=p>=</span> <span class=s>/500.html</span> <span class=p>{</span>
  <span class=kn>root</span> <span class=nv>$errordocs</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>error_page</span> <span class=mi>502</span> <span class=s>/502.html</span><span class=p>;</span>
<span class=k>location</span> <span class=p>=</span> <span class=s>/502.html</span> <span class=p>{</span>
  <span class=kn>root</span> <span class=nv>$errordocs</span><span class=p>;</span>
<span class=p>}</span>

<span class=k>error_page</span> <span class=mi>503</span> <span class=s>/503.html</span><span class=p>;</span>
<span class=k>location</span> <span class=p>=</span> <span class=s>/503.html</span> <span class=p>{</span>
  <span class=kn>root</span> <span class=nv>$errordocs</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div><p>Сохраняем в файл <code>/etc/nginx/errordocs_default.inc</code>. Во всех хостах, в секции <code>server {...}</code> дописываем одну строчку (<a class=link href=http://nginx.org/ru/docs/ngx_core_module.html#include target=_blank rel=noopener>документация</a>):</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=k>server</span> <span class=p>{</span>
  <span class=c1># ...
</span><span class=c1></span>  <span class=kn>include</span> <span class=s>/etc/nginx/errordocs_default.inc</span><span class=p>;</span>
  <span class=c1># ...
</span><span class=c1></span><span class=p>}</span>
</code></pre></div><p>Перезапускаем nginx, проверяем.</p>
<h1 id=пример-страницы-ошибки>Пример страницы ошибки</h1>
<p>В качестве заготовки для содержимого страницы ошибки может быть следующий пример:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=cp>&lt;!DOCTYPE html&gt;</span>
<span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>http-equiv</span><span class=o>=</span><span class=s>&#34;Content-Type&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;text/html; charset=UTF-8&#34;</span> <span class=p>/&gt;</span>
  <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;robots&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;noindex, nofollow&#34;</span> <span class=p>/&gt;</span>
  <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>Error 404<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;viewport&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;width=device-width, initial-scale=1, maximum-scale=1&#34;</span> <span class=p>/&gt;</span>
  <span class=p>&lt;</span><span class=nt>link</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;//fonts.googleapis.com/css?family=Oxygen:400,800&#34;</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/css&#34;</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>style</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text/css&#34;</span><span class=p>&gt;</span>
    <span class=nt>html</span><span class=o>,</span><span class=nt>body</span><span class=p>{</span><span class=k>margin</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span><span class=k>padding</span><span class=p>:</span><span class=mi>0</span><span class=p>}</span>
    <span class=nt>body</span><span class=p>{</span><span class=k>overflow</span><span class=p>:</span><span class=kc>hidden</span><span class=p>;</span><span class=k>text-align</span><span class=p>:</span><span class=kc>center</span><span class=p>;</span><span class=k>background</span><span class=p>:</span><span class=mh>#1a1a1a</span><span class=p>}</span>
    <span class=p>.</span><span class=nc>noselect</span><span class=p>{</span><span class=kp>-webkit-</span><span class=n>touch-callout</span><span class=p>:</span><span class=kc>none</span><span class=p>;</span><span class=kp>-webkit-</span><span class=k>user-select</span><span class=p>:</span><span class=kc>none</span><span class=p>;</span><span class=kp>-khtml-</span><span class=k>user-select</span><span class=p>:</span><span class=kc>none</span><span class=p>;</span><span class=kp>-moz-</span><span class=k>user-select</span><span class=p>:</span><span class=kc>none</span><span class=p>;</span><span class=kp>-ms-</span><span class=k>user-select</span><span class=p>:</span><span class=kc>none</span><span class=p>;</span><span class=k>user-select</span><span class=p>:</span><span class=kc>none</span><span class=p>}</span>
    <span class=o>*</span><span class=p>{</span><span class=k>color</span><span class=p>:</span><span class=mh>#eee</span><span class=p>;</span><span class=k>font-weight</span><span class=p>:</span><span class=mi>400</span><span class=p>;</span><span class=k>font-family</span><span class=p>:</span><span class=n>Tahoma</span><span class=p>,</span><span class=n>Arial</span><span class=p>,</span><span class=n>Verdana</span><span class=p>;</span><span class=kp>-webkit-</span><span class=k>transition</span><span class=p>:</span><span class=kc>all</span> <span class=mf>.3</span><span class=kt>s</span><span class=p>;</span><span class=kp>-moz-</span><span class=k>transition</span><span class=p>:</span><span class=kc>all</span> <span class=mf>.3</span><span class=kt>s</span><span class=p>;</span><span class=kp>-o-</span><span class=k>transition</span><span class=p>:</span><span class=kc>all</span> <span class=mf>.3</span><span class=kt>s</span><span class=p>;</span><span class=k>cursor</span><span class=p>:</span><span class=kc>default</span><span class=p>;</span><span class=kp>-webkit-</span><span class=n>font-smoothing</span><span class=p>:</span><span class=n>antialiased</span><span class=cp>!important</span><span class=p>}</span>
    <span class=p>.</span><span class=nc>screenCenter</span><span class=p>{</span><span class=k>position</span><span class=p>:</span><span class=kc>absolute</span><span class=p>;</span><span class=k>height</span><span class=p>:</span><span class=mi>300</span><span class=kt>px</span><span class=p>;</span><span class=k>width</span><span class=p>:</span><span class=mi>450</span><span class=kt>px</span><span class=p>;</span><span class=k>top</span><span class=p>:</span><span class=mi>50</span><span class=kt>%</span><span class=p>;</span><span class=k>left</span><span class=p>:</span><span class=mi>50</span><span class=kt>%</span><span class=p>;</span><span class=k>margin</span><span class=p>:</span><span class=mi>-150</span><span class=kt>px</span> <span class=mi>0</span> <span class=mi>0</span> <span class=mi>-225</span><span class=kt>px</span><span class=p>}</span>
    <span class=nt>h1</span><span class=o>,</span><span class=nt>h4</span><span class=p>{</span><span class=k>font-family</span><span class=p>:</span><span class=n>Oxygen</span><span class=p>,</span><span class=n>Tahoma</span><span class=p>,</span><span class=n>Verdana</span><span class=p>,</span><span class=n>Arial</span><span class=p>;</span><span class=k>width</span><span class=p>:</span><span class=mi>100</span><span class=kt>%</span><span class=p>;</span><span class=k>padding</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span><span class=k>margin</span><span class=p>:</span><span class=mi>0</span><span class=p>;</span><span class=k>text-align</span><span class=p>:</span><span class=kc>center</span><span class=p>}</span>
    <span class=nt>h4</span><span class=p>{</span><span class=k>font-size</span><span class=p>:</span><span class=mi>20</span><span class=kt>px</span><span class=p>;</span><span class=k>position</span><span class=p>:</span><span class=kc>absolute</span><span class=p>;</span><span class=k>top</span><span class=p>:</span><span class=mi>110</span><span class=kt>px</span><span class=p>;</span><span class=k>background</span><span class=p>:</span><span class=mh>#1a1a1a</span><span class=p>;</span><span class=k>padding</span><span class=p>:</span><span class=mi>10</span><span class=kt>px</span> <span class=mi>0</span><span class=p>;</span><span class=k>z-index</span><span class=p>:</span><span class=mi>10</span><span class=p>}</span>
    <span class=nt>h1</span><span class=p>{</span><span class=k>font-size</span><span class=p>:</span><span class=mi>220</span><span class=kt>px</span><span class=p>;</span><span class=k>font-weight</span><span class=p>:</span><span class=mi>800</span><span class=p>;</span><span class=k>text-shadow</span><span class=p>:</span><span class=mi>0</span> <span class=mi>0</span> <span class=mi>32</span><span class=kt>px</span> <span class=mh>#fff</span><span class=p>;</span><span class=k>color</span><span class=p>:</span><span class=kc>transparent</span><span class=p>;</span><span class=k>opacity</span><span class=p>:</span><span class=mf>.7</span><span class=p>;</span><span class=k>z-index</span><span class=p>:</span><span class=mi>1</span><span class=p>}</span>
    <span class=p>.</span><span class=nc>screenCenter</span><span class=p>:</span><span class=nd>hover</span> <span class=nt>h1</span><span class=p>{</span><span class=k>font-size</span><span class=p>:</span><span class=mi>220</span><span class=kt>px</span><span class=p>;</span><span class=k>font-weight</span><span class=p>:</span><span class=mi>800</span><span class=p>;</span><span class=k>text-shadow</span><span class=p>:</span><span class=mi>0</span> <span class=mi>3</span><span class=kt>px</span> <span class=mi>3</span><span class=kt>px</span> <span class=nb>rgba</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>);</span><span class=k>color</span><span class=p>:</span><span class=mh>#fff</span><span class=p>;</span><span class=k>opacity</span><span class=p>:</span><span class=mi>1</span><span class=cp>!important</span><span class=p>}</span>
    <span class=p>.</span><span class=nc>screenCenter</span><span class=p>:</span><span class=nd>hover</span> <span class=nt>h4</span><span class=p>{</span><span class=k>opacity</span><span class=p>:</span><span class=mi>0</span><span class=cp>!important</span><span class=p>}</span>
  <span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;screenCenter noselect&#34;</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>h4</span><span class=p>&gt;</span>File not found<span class=p>&lt;/</span><span class=nt>h4</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>404<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div><p>Превью примера:</p>
<p><figure>
<a href=https://hsto.org/files/2f2/eef/c10/2f2eefc100fe4c918cad22b54f5efe72.gif>
<img src=https://hsto.org/files/2f2/eef/c10/2f2eefc100fe4c918cad22b54f5efe72.gif loading=lazy>
</a>
</figure></p>
<p>Для создания других страниц будет достаточно изменить в примере все вхождения <code>404</code> на необходимый код, и поправить описание ошибки между <code>&lt;h4>...&lt;/h4></code>.</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/html/>html</a>
<a href=/tags/linux/>linux</a>
<a href=/tags/nginx/>nginx</a>
<a href=/tags/service/>service</a>
</section>
<div style=display:flex;justify-content:space-between;margin-top:1em>
<div>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>WTFPL</span>
</section>
</div>
<div style=margin-left:auto><section style=height:100%>
<a href=https://github.com/hook-sh/blog/edit/master/content/post/customize-nginx-error-pages/index.md style=font-size:.7em;color:var(--card-text-color-tertiary)>Редиктировать</a>
</section>
</div>
</div></footer>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>Может быть интересно</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article class=has-image>
<a href=/compile-and-config-msmtp/>
<div class=article-image>
<img src=/compile-and-config-msmtp/cover.74e5f5752c378bc5c249233e9c0f8284_hub577c79af8463c924351e5a1445741f0_93501_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=compile-and-config-msmtp data-hash="md5-dOX1dSw3i8XCSSM+nA+ChA==">
</div>
<div class=article-details>
<h2 class=article-title>Собираем и настраиваем msmtp</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/iptables-for-docker-swarm/>
<div class=article-image>
<img src=/iptables-for-docker-swarm/cover.46786305ea94fea9001f78310af2161c_huca17b364cb926e2346fafd474740dcec_161710_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=iptables-for-docker-swarm data-hash="md5-RnhjBeqU/qkAH3gxCvIWHA==">
</div>
<div class=article-details>
<h2 class=article-title>Настройка iptables для swarm кластера</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/ssh-honeypot/>
<div class=article-image>
<img src=/ssh-honeypot/cover.a3b24e7c925b55ba3b2c0728bc5d5145_hu3201198c97328eef28a158f0c8170276_222779_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=ssh-honeypot data-hash="md5-o7JOfJJbVbo7LAcovF1RRQ==">
</div>
<div class=article-details>
<h2 class=article-title>SSH Honeypot — просто и со вкусом</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/setup-private-proxy-server/>
<div class=article-image>
<img src=/setup-private-proxy-server/cover.a7487377d94a76a3454be12889ada512_hu07b4d3c852e20c10f4c2e2e158cf3f2d_95916_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=setup-private-proxy-server data-hash="md5-p0hzd9lKdqNFS+Eoia2lEg==">
</div>
<div class=article-details>
<h2 class=article-title>Поднимаем свой, приватный прокси-сервер</h2>
</div>
</a>
</article>
<article class=has-image>
<a href=/little-iptables-tips/>
<div class=article-image>
<img src=/little-iptables-tips/cover.46786305ea94fea9001f78310af2161c_huca17b364cb926e2346fafd474740dcec_161710_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy data-key=little-iptables-tips data-hash="md5-RnhjBeqU/qkAH3gxCvIWHA==">
</div>
<div class=article-details>
<h2 class=article-title>Маленькая хитрость iptables</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<script src=https://utteranc.es/client.js repo=hook-sh/blog issue-term=pathname crossorigin=anonymous async></script>
<style>.utterances{max-width:unset}</style>
<script>function setUtterancesTheme(b){let a=document.querySelector('.utterances iframe');a&&a.contentWindow.postMessage({type:'set-theme',theme:`github-${b}`},'https://utteranc.es')}addEventListener('message',a=>{if(a.origin!=='https://utteranc.es')return;setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener('onColorSchemeChange',a=>{setUtterancesTheme(a.detail)})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2014 -
2022 blog [dot] hook
</section>
<section class=powerby>
Make love, not war <br>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Содержание</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#глобальные-страницы-ошибок>Глобальные страницы ошибок</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
<script data-no-instant>(function(){const a=document.querySelectorAll('.outdated-post'),b=new Date;for(let c=0,f=a.length;c<f;c++){const d=a[c],e=new Date(d.getAttribute('data-posted-at'));if(!isNaN(e.valueOf())&&e.getFullYear()>1){const a=Math.abs(b.getTime()-e.getTime()),c=Math.ceil(a/(1e3*3600*24));c>=547&&(d.style.display='block',d.style.visibility='visible')}}})()</script>
</body>
</html>